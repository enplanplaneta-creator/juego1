<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Caza-bulos ambientales ¬∑ Juego (12 bulos)</title>
  <style>
    #game-root, #game-root * { box-sizing: border-box; }
    #game-root {
      --bg0: #bfe3ff; --bg1: #e9f5ff; --ink:#0b243b; --ink-soft:#254a6a;
      --panel: rgba(255,255,255,.9); --accent:#0ea5e9; --accent-2:#22c55e; --danger:#ef4444;
      --shadow: 0 6px 24px rgba(0,0,0,.15);
      position: relative; width: 100%; min-height: 100vh; overflow: hidden;
      font-family: system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,"Helvetica Neue",Arial,"Noto Sans";
      color: var(--ink); line-height: 1.3;
    }
    .game-area{position:relative;width:100%;height:100vh;background:radial-gradient(120% 100% at 50% 0%,var(--bg1) 0%,var(--bg0) 50%,#a7d8ff 100%);overflow:hidden;touch-action:none;user-select:none;}
    .hud{position:absolute;inset:12px 12px auto 12px;display:flex;gap:8px;align-items:center;z-index:30;background:rgba(255,255,255,.6);backdrop-filter:blur(6px);border-radius:14px;padding:8px 10px;box-shadow:var(--shadow);} 
    .hud .counter{font-weight:700;padding:6px 10px;border-radius:10px;background:rgba(255,255,255,.9);} 
    .btn{appearance:none;border:0;border-radius:12px;background:var(--accent);color:#fff;padding:8px 12px;font-weight:700;cursor:pointer;transition:transform .05s ease,opacity .2s ease;box-shadow:var(--shadow);} 
    .btn:active{transform:translateY(1px) scale(0.99);} .btn.secondary{background:var(--accent-2);} .btn.danger{background:var(--danger);} 

    /* Protagonista */
    .player{position:absolute;width:56px;height:56px;left:50%;top:62%;transform:translate(-50%,-50%);will-change:transform;z-index:10;pointer-events:none;} 
    .player svg{display:block;width:100%;height:100%;}
    @keyframes sway{0%,100%{transform:rotate(-6deg);}50%{transform:rotate(6deg);}}
    .player .arm{transform-origin:36px 16px;animation:sway 1.2s ease-in-out infinite;}
    .player.face-left svg{transform:scaleX(-1);transform-origin:50% 50%;transform-box:fill-box;}
    .player.face-right svg{transform:scaleX(1);transform-origin:50% 50%;transform-box:fill-box;}

    /* Mariposas */
    .butterfly{position:absolute;width:44px;height:36px;transform:translate(-50%,-50%);will-change:transform;z-index:5;filter:drop-shadow(0 2px 6px rgba(0,0,0,.25));}
    .butterfly svg{width:100%;height:100%;display:block;}
    @keyframes flap{0%,100%{transform:rotate(4deg) scale(1.02);}50%{transform:rotate(-6deg) scale(0.98);}}
    .butterfly .wL{transform-origin:right center;animation:flap .6s ease-in-out infinite;}
    .butterfly .wR{transform-origin:left center;animation:flap .6s ease-in-out infinite reverse;}

    /* Modal y fin */
    .modal,.end-screen{position:absolute;inset:0;display:grid;place-items:center;z-index:50;}
    .hidden{display:none !important;}
    .overlay{position:absolute;inset:0;background:rgba(4,21,39,.45);backdrop-filter:blur(2px);} 
    .dialog,.panel{position:relative;width:min(92vw,920px);max-height:min(86vh,720px);overflow:auto;background:var(--panel);border-radius:16px;padding:18px 18px 14px;box-shadow:var(--shadow);} 
    .dialog h2{margin:0 0 8px;font-size:clamp(1.1rem,2.4vw,1.5rem);} .dialog p{margin:6px 0 0;font-size:clamp(.95rem,2vw,1.05rem);} 
    .dialog .multiline{white-space:pre-wrap; font-size:clamp(.95rem,2vw,1.05rem);} 
    .dialog .sources{margin-top:10px;font-size:.95rem;color:var(--ink-soft);} .dialog .actions{display:flex;gap:8px;justify-content:flex-end;margin-top:12px;} 
    .close-x{position:absolute;top:8px;right:8px;width:36px;height:36px;border-radius:10px;border:0;background:#fff;cursor:pointer;box-shadow:var(--shadow);font-size:20px;line-height:1;} 
    .panel h2{margin:0 0 8px;font-size:clamp(1.2rem,2.8vw,1.8rem);} .panel p{margin:10px 0 16px;}

    /* Controles t√°ctiles */
    .touch-ui{position:absolute;inset:auto 12px 12px 12px;display:flex;align-items:flex-end;gap:12px;z-index:40;pointer-events:none;}
    .joystick{pointer-events:auto;position:relative;width:112px;height:112px;border-radius:50%;background:rgba(255,255,255,.55);backdrop-filter:blur(6px);box-shadow:var(--shadow);touch-action:none;}
    .joystick .stick{position:absolute;left:50%;top:50%;width:56px;height:56px;transform:translate(-50%,-50%);border-radius:50%;background:rgba(255,255,255,.95);border:2px solid rgba(0,0,0,.08);box-shadow:var(--shadow);} 
    .dpad{pointer-events:auto;display:grid;grid-template:" . up  . " 40px "left . right" 40px " . down . " 40px/40px 40px 40px;gap:6px;background:rgba(255,255,255,.55);padding:8px;border-radius:16px;box-shadow:var(--shadow);} 
    .dpad button{width:40px;height:40px;border-radius:10px;border:0;background:rgba(255,255,255,.95);font-weight:900;box-shadow:var(--shadow);cursor:pointer;} 
    .dpad .up{grid-area:up;} .dpad .down{grid-area:down;} .dpad .left{grid-area:left;} .dpad .right{grid-area:right;}

    @media (min-width:900px){.touch-ui{opacity:.85;}}
  </style>
</head>
<body>
  <div id="game-root" tabindex="0" aria-label="Juego caza-bulos ambientales" role="application">
    <div class="game-area" id="gameArea" aria-label="√Årea de juego">
      <div class="hud" aria-live="polite">
        <div class="counter">Bulos vistos: <span id="seenCount">0</span>/12</div>
        <button class="btn" id="btnRestart" aria-label="Reiniciar partida">Reiniciar</button>
      </div>

      <!-- Protagonista -->
      <div class="player face-right" id="player" role="img" aria-label="Protagonista con cazamariposas">
        <svg viewBox="0 0 56 56" aria-hidden="true">
          <circle cx="20" cy="14" r="8" fill="#ffd38e" />
          <rect x="12" y="22" width="16" height="18" rx="6" fill="#2563eb"/>
          <rect x="10" y="40" width="10" height="12" rx="3" fill="#0ea5e9"/>
          <rect x="20" y="40" width="10" height="12" rx="3" fill="#0ea5e9"/>
          <g class="arm">
            <rect x="24" y="24" width="18" height="6" rx="3" fill="#ffd38e"/>
            <rect x="38" y="18" width="3" height="20" rx="1.5" fill="#8b5e3c"/>
            <ellipse cx="45" cy="14" rx="9" ry="7" fill="#fff" stroke="#7aa2c8" stroke-width="2"/>
            <ellipse cx="45" cy="14" rx="7" ry="5" fill="none" stroke="#7aa2c8" stroke-width="1.2" stroke-dasharray="2 2"/>
          </g>
        </svg>
      </div>

      <div id="butterflies" aria-label="Mariposas"></div>

      <div class="touch-ui" aria-hidden="false">
        <div class="joystick" id="joystick" aria-label="Joystick t√°ctil"><div class="stick" id="stick"></div></div>
        <div class="dpad" aria-label="Botones flecha t√°ctiles">
          <button class="up" data-dir="up" aria-label="Arriba">‚ñ≤</button>
          <button class="left" data-dir="left" aria-label="Izquierda">‚óÄ</button>
          <button class="right" data-dir="right" aria-label="Derecha">‚ñ∂</button>
          <button class="down" data-dir="down" aria-label="Abajo">‚ñº</button>
        </div>
      </div>
    </div>

    <div class="modal hidden" id="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <div class="overlay" id="overlay" tabindex="-1"></div>
      <div class="dialog" role="document">
        <button class="close-x" id="closeX" aria-label="Cerrar">√ó</button>
        <h2 id="modalTitle">T√≠tulo</h2>
        <div id="modalText" class="multiline">Texto</div>
        <p class="sources" id="modalSources"><strong>Enlace:</strong> ‚Äî</p>
        <div class="actions"><button class="btn secondary" id="modalOk" autofocus>Cerrar (Esc)</button></div>
      </div>
    </div>

    <div class="end-screen hidden" id="endScreen" role="dialog" aria-modal="true" aria-labelledby="endTitle">
      <div class="overlay"></div>
      <div class="panel">
        <h2 id="endTitle">¬°Enhorabuena! ü¶ã</h2>
        <p>Has cazado los 12 bulos. ¬øOtra partida?</p>
        <button class="btn" id="playAgain">Volver a jugar</button>
      </div>
    </div>
  </div>

  <script>
    // ----- Datos: 12 bulos con texto completo + enlace -----
    const BULOS = [
      {
        id:1,
        titulo:"‚ÄúEl clima siempre ha cambiado, esto no es diferente‚Äù",
        texto:`Este argumento se repite mucho porque es cierto que a lo largo de la historia de la Tierra el clima ha experimentado variaciones naturales: glaciaciones, periodos interglaciares, √©pocas m√°s c√°lidas impulsadas por cambios orbitales, erupciones volc√°nicas o variaciones en la radiaci√≥n solar. Sin embargo, el cambio actual es radicalmente distinto. La velocidad del calentamiento global observado en los √∫ltimos 150 a√±os no tiene precedentes en los √∫ltimos millones de a√±os. Por ejemplo, al salir de la √∫ltima glaciaci√≥n, el planeta tard√≥ unos 5.000 a√±os en calentarse 5 ¬∞C. Hoy, hemos aumentado alrededor de 1,2 ¬∞C en poco m√°s de un siglo, y seguimos sumando.

Adem√°s, sabemos cu√°l es la causa: las emisiones de gases de efecto invernadero procedentes de la quema de carb√≥n, petr√≥leo y gas, as√≠ como de la deforestaci√≥n y la agricultura intensiva. Los modelos clim√°ticos que incluyen solo causas naturales (como volcanes o variaciones solares) no explican el aumento actual. Solo cuando se a√±aden las emisiones humanas, los modelos coinciden con lo observado. Por tanto, decir que ‚Äúel clima siempre cambia‚Äù no es un argumento v√°lido: es una forma de restar importancia a un fen√≥meno nuevo, causado por nosotros y con consecuencias mucho m√°s r√°pidas y graves que cualquier variaci√≥n pasada.`,
        link:{ title:"NASA ‚Äî Evidencias del cambio clim√°tico", url:"https://science.nasa.gov/climate-change/evidence/" }
      },
      {
        id:2,
        titulo:"‚ÄúHace fr√≠o hoy, ¬øc√≥mo puede haber calentamiento global?‚Äù",
        texto:`Este bulo nace de confundir tiempo atmosf√©rico con clima. El tiempo es lo que ocurre en un lugar concreto durante horas o d√≠as: puede nevar en Madrid en marzo o hacer un fr√≠o intenso en Nueva York en enero. En cambio, el clima es la media de condiciones meteorol√≥gicas a largo plazo (d√©cadas) y a escala global. Que tengamos un invierno fr√≠o en una regi√≥n no significa que el planeta no se est√© calentando.

De hecho, el aumento global de temperaturas est√° alterando tambi√©n los patrones meteorol√≥gicos locales. El debilitamiento de la corriente en chorro (jet stream) en el hemisferio norte, vinculado al calentamiento del √Årtico, puede provocar que masas de aire fr√≠o desciendan m√°s al sur de lo habitual, generando olas de fr√≠o puntuales. Parad√≥jicamente, estos episodios extremos son compatibles con un planeta que se calienta.

Los datos globales son inequ√≠vocos: la √∫ltima d√©cada (2014‚Äì2023) ha sido la m√°s c√°lida registrada desde que hay registros, y 2023 marc√≥ un r√©cord hist√≥rico de temperatura media global. Un d√≠a fr√≠o no contradice el calentamiento; es como ver que baja la marea en una playa mientras la tendencia general del mar es subir. El error est√° en confundir escalas.`,
        link:{ title:"NOAA ‚Äî Tiempo vs. clima", url:"https://oceanservice.noaa.gov/facts/weather_climate.html" }
      },
      {
        id:3,
        titulo:"‚ÄúLos cient√≠ficos no est√°n de acuerdo‚Äù",
        texto:`Este mito se ha utilizado durante d√©cadas para sembrar dudas. La estrategia se inspira en lo que hizo la industria del tabaco en los a√±os 60 y 70: exagerar las pocas voces discordantes para aparentar falta de consenso. En el caso del cambio clim√°tico, el consenso cient√≠fico es abrumador. Diversos estudios de metaan√°lisis sobre decenas de miles de art√≠culos revisados por pares muestran que entre el 97 y el 99 % de los cient√≠ficos clim√°ticos coinciden en que el calentamiento global es real y causado principalmente por las actividades humanas.

Un trabajo de referencia es el de Cook et al. (2016), que analiz√≥ m√°s de 12.000 estudios cient√≠ficos y encontr√≥ ese nivel de acuerdo. Adem√°s, instituciones como la NASA, la NOAA, la Organizaci√≥n Meteorol√≥gica Mundial, el IPCC y pr√°cticamente todas las academias de ciencias del mundo respaldan esta conclusi√≥n.

Decir que ‚Äúlos cient√≠ficos no se ponen de acuerdo‚Äù es un bulo porque confunde el debate cient√≠fico normal ‚Äîsobre matices, proyecciones o impactos concretos‚Äî con un supuesto desacuerdo sobre lo b√°sico. En realidad, no hay debate cient√≠fico sobre si el cambio clim√°tico es real y antropog√©nico, sino sobre c√≥mo ser√° de r√°pido y c√≥mo podemos mitigarlo.`,
        link:{ title:"Cook et al. 2016 ‚Äî Consensus on consensus", url:"https://repository.library.noaa.gov/view/noaa/62111" }
      },
      {
        id:4,
        titulo:"‚ÄúEl CO‚ÇÇ es bueno para las plantas, no puede ser da√±ino‚Äù",
        texto:`Este argumento parte de una verdad parcial: las plantas necesitan di√≥xido de carbono para hacer la fotos√≠ntesis. Sin embargo, de ah√≠ se extrapola err√≥neamente que cuanto m√°s CO‚ÇÇ, mejor. La realidad es que el exceso de este gas en la atm√≥sfera est√° provocando un desequilibrio global. Aunque en condiciones de laboratorio un aumento moderado de CO‚ÇÇ puede estimular el crecimiento de algunas plantas, en los ecosistemas reales este efecto se ve limitado por otros factores como la disponibilidad de nutrientes, el agua o la temperatura.

Adem√°s, el exceso de CO‚ÇÇ no afecta solo a la vegetaci√≥n terrestre. Gran parte se disuelve en los oc√©anos, donde provoca acidificaci√≥n marina, lo que da√±a a corales, moluscos y especies fundamentales para la cadena alimentaria. En tierra, el cambio clim√°tico asociado al CO‚ÇÇ causa olas de calor, sequ√≠as y fen√≥menos extremos que perjudican mucho m√°s a la agricultura de lo que la ‚Äúfertilizaci√≥n por CO‚ÇÇ‚Äù podr√≠a beneficiar.

Por √∫ltimo, los bosques y ecosistemas actuales no tienen capacidad de absorber todo el CO‚ÇÇ que emitimos. La acumulaci√≥n en la atm√≥sfera es tan grande que se est√° alterando el balance energ√©tico del planeta, calent√°ndolo m√°s r√°pido de lo que los ecosistemas pueden adaptarse.`,
        link:{ title:"Skeptical Science ‚Äî CO‚ÇÇ es 'comida para plantas' (revisi√≥n)", url:"https://skepticalscience.com/fact-brief-plant.html" }
      },
      {
        id:5,
        titulo:"‚ÄúLa Ant√°rtida est√° ganando hielo‚Äù",
        texto:`Este bulo suele aparecer en titulares aislados que muestran un aumento de la extensi√≥n de hielo marino en ciertas zonas de la Ant√°rtida durante algunos a√±os. Sin embargo, es importante diferenciar entre hielo marino estacional y masa de hielo continental. Mientras que la extensi√≥n del hielo marino puede variar anualmente por cambios en el viento y las corrientes, la tendencia a largo plazo es clara: el continente pierde masa neta cada a√±o.

Las observaciones de sat√©lite y estudios de campo muestran que, especialmente en la Ant√°rtida occidental y en la pen√≠nsula ant√°rtica, los glaciares se est√°n derritiendo r√°pidamente. El balance global es negativo: la Ant√°rtida ha perdido aproximadamente 2.500 gigatoneladas de hielo desde 1992, contribuyendo a la subida del nivel del mar.

El mito se refuerza porque algunas zonas, como la Ant√°rtida oriental, han mostrado cierto aumento de acumulaci√≥n de nieve, lo que confunde a la opini√≥n p√∫blica. Pero incluso teniendo en cuenta estas ganancias localizadas, la p√©rdida total es mucho mayor. Presentar este fen√≥meno como prueba de que ‚Äúel cambio clim√°tico no existe‚Äù es una manipulaci√≥n que ignora la evidencia global y los datos de largo plazo.`,
        link:{ title:"NASA ‚Äî Vital Signs: Ice Sheets", url:"https://climate.nasa.gov/vital-signs/ice-sheets/" }
      },
      {
        id:6,
        titulo:"‚ÄúEl Sol es el culpable del calentamiento, no los humanos‚Äù",
        texto:`El Sol es, sin duda, la principal fuente de energ√≠a de la Tierra y ha influido en el clima a lo largo de millones de a√±os. Sin embargo, las mediciones modernas muestran con claridad que en las √∫ltimas d√©cadas la radiaci√≥n solar no ha aumentado, mientras que las temperaturas globales s√≠ lo han hecho de manera acelerada. De hecho, desde finales del siglo XX la actividad solar se ha mantenido estable o incluso ha mostrado una ligera disminuci√≥n, mientras que el planeta sigue batiendo r√©cords de calor.

Los estudios comparativos confirman que la correlaci√≥n entre la concentraci√≥n de gases de efecto invernadero y el aumento de temperaturas es mucho m√°s fuerte que con la radiaci√≥n solar. Los modelos clim√°ticos que incluyen √∫nicamente factores naturales, como variaciones solares o actividad volc√°nica, no pueden explicar el calentamiento observado. Solo al a√±adir las emisiones humanas de CO‚ÇÇ y otros gases se logra reproducir la evoluci√≥n de la temperatura global.

Culpar al Sol es, por tanto, una manera de desviar la atenci√≥n de la verdadera causa: la actividad humana y la quema masiva de combustibles f√≥siles.`,
        link:{ title:"NASA ‚Äî Milankovitch y por qu√© no explican el calentamiento actual", url:"https://climate.nasa.gov/news/2949/why-milankovitch-orbital-cycles-cant-explain-earths-current-warming/" }
      },
      {
        id:7,
        titulo:"‚ÄúLos registros de temperatura son dudosos / el gr√°fico del hockey stick es falso‚Äù",
        texto:`Una de las estrategias m√°s frecuentes de la desinformaci√≥n clim√°tica consiste en poner en duda los datos. Se suele afirmar que los term√≥metros urbanos est√°n contaminados por el ‚Äúefecto isla de calor‚Äù, que los registros hist√≥ricos est√°n manipulados o que gr√°ficos como el famoso ‚Äúpalo de hockey‚Äù (hockey stick) son falsos.

La realidad es que existen m√∫ltiples l√≠neas de evidencia independientes que confirman el calentamiento global. No dependemos solo de los term√≥metros urbanos: hay mediciones rurales, sat√©lites, boyas oce√°nicas, registros de corales, anillos de √°rboles o n√∫cleos de hielo que ofrecen la misma conclusi√≥n. El ‚Äúhockey stick‚Äù, publicado por primera vez en 1999 por Mann et al., ha sido revisado y confirmado por numerosos estudios posteriores. La forma de ese gr√°fico, que muestra siglos de temperaturas relativamente estables seguidos de un brusco aumento en el siglo XX, ha sido validada con diferentes m√©todos.

Poner en duda los registros es una forma de erosionar la confianza en la ciencia. Sin embargo, la convergencia de evidencias de tan diversas fuentes hace que la certeza sobre el calentamiento global sea s√≥lida y dif√≠cil de rebatir.`,
        link:{ title:"Skeptical Science ‚Äî Evidencia del 'hockey stick'", url:"https://skepticalscience.com/broken-hockey-stick.htm" }
      },
      {
        id:8,
        titulo:"‚ÄúLas energ√≠as renovables no funcionan / son poco fiables‚Äù",
        texto:`Este bulo se centra en dos ideas: que las renovables son demasiado caras y que no pueden garantizar un suministro estable porque dependen del sol y del viento. Ambas afirmaciones han quedado desmentidas por los avances tecnol√≥gicos de las √∫ltimas d√©cadas.

En primer lugar, los costes de la energ√≠a solar y e√≥lica han ca√≠do dr√°sticamente: en muchos pa√≠ses ya son la forma m√°s barata de generar electricidad. Seg√∫n la Agencia Internacional de la Energ√≠a (IEA), en 2023 la energ√≠a solar fue la fuente m√°s barata de nueva capacidad instalada a nivel mundial.

En cuanto a la fiabilidad, la intermitencia se gestiona con almacenamiento en bater√≠as, diversificaci√≥n de fuentes, interconexiones entre regiones y el uso complementario de otras energ√≠as limpias como la hidroel√©ctrica o la geotermia. Cada vez m√°s pa√≠ses demuestran que se puede integrar un alto porcentaje de renovables sin poner en riesgo la estabilidad del sistema el√©ctrico.

Decir que las renovables ‚Äúno funcionan‚Äù es un mito que ignora tanto la realidad tecnol√≥gica como el despliegue masivo que ya est√° ocurriendo en todo el mundo.`,
        link:{ title:"IEA ‚Äî Renewables 2023 (resumen)", url:"https://www.iea.org/reports/renewables-2023/executive-summary" }
      },
      {
        id:9,
        titulo:"‚ÄúLos volcanes emiten m√°s CO‚ÇÇ que los humanos‚Äù",
        texto:`Este mito intenta minimizar la responsabilidad humana sugiriendo que las emisiones volc√°nicas naturales superan a las nuestras. Los datos muestran lo contrario: la actividad volc√°nica global emite entre 0,13 y 0,44 gigatoneladas de CO‚ÇÇ al a√±o, mientras que las actividades humanas emiten alrededor de 36 gigatoneladas anuales. Es decir, m√°s de 100 veces m√°s.

Los volcanes s√≠ han influido en el clima en el pasado, pero normalmente por el efecto de los aerosoles (cenizas y di√≥xido de azufre) que enfr√≠an temporalmente la atm√≥sfera al reflejar radiaci√≥n solar, no por las emisiones de CO‚ÇÇ. Por ejemplo, la erupci√≥n del Pinatubo en 1991 provoc√≥ un descenso temporal de las temperaturas globales de aproximadamente medio grado durante uno o dos a√±os.

Comparar emisiones humanas con volc√°nicas es un intento de desviar la atenci√≥n. En realidad, la magnitud de las emisiones humanas ha superado ampliamente las variaciones naturales, y es la principal causa del calentamiento actual.`,
        link:{ title:"USGS ‚Äî ¬øEmiten m√°s CO‚ÇÇ los volcanes que los humanos?", url:"https://www.usgs.gov/programs/VHP/volcanoes-can-affect-climate" }
      },
      {
        id:10,
        titulo:"‚ÄúNo podemos hacer nada, es demasiado tarde‚Äù",
        texto:`Este bulo fomenta la inacci√≥n apelando a la desesperanza. Se difunde la idea de que los da√±os ya est√°n hechos y que cualquier esfuerzo ser√° in√∫til. Sin embargo, la ciencia del clima muestra que cada d√©cima de grado cuenta. Limitar el calentamiento a 1,5 ¬∞C o 2 ¬∞C reducir√° significativamente los impactos sobre salud, biodiversidad y econom√≠a en comparaci√≥n con un escenario de 3 o 4 ¬∞C.

El IPCC ha dejado claro que a√∫n estamos a tiempo de mitigar los peores efectos si reducimos r√°pidamente las emisiones. El ritmo de despliegue de energ√≠as limpias, la mejora en eficiencia y la conservaci√≥n de ecosistemas ofrecen oportunidades reales de cambio. Incluso en escenarios donde no se logra el objetivo de 1,5 ¬∞C, actuar ahora puede evitar impactos catastr√≥ficos.

Decir que es ‚Äúdemasiado tarde‚Äù es un mensaje desmovilizador que beneficia a quienes no quieren cambios. En realidad, nunca es demasiado tarde para reducir da√±os. La diferencia entre actuar y no hacerlo se traduce en millones de vidas y ecosistemas afectados.`,
        link:{ title:"IPCC 2023 ‚Äî Informe de S√≠ntesis (nota de prensa)", url:"https://www.ipcc.ch/2023/03/20/press-release-ar6-synthesis-report/" }
      },
      {
        id:11,
        titulo:"‚ÄúEl cambio clim√°tico solo afecta a osos polares o lugares lejanos‚Äù",
        texto:`La imagen del oso polar en un bloque de hielo se ha convertido en s√≠mbolo del cambio clim√°tico, pero tambi√©n ha contribuido a que algunas personas piensen que es un problema lejano, que solo afecta al √Årtico. La realidad es muy distinta: los impactos ya se sienten en todo el mundo.

En Europa, hemos visto olas de calor m√°s intensas, como las de 2003, 2019 o 2022, que causaron decenas de miles de muertes. En Espa√±a, los incendios forestales se han intensificado y las sequ√≠as prolongadas afectan a la agricultura y al suministro de agua. En Asia, las inundaciones extremas como las de Pakist√°n en 2022 desplazaron a millones de personas. En Am√©rica, huracanes y tormentas son m√°s destructivos por el aumento del nivel del mar y la energ√≠a acumulada en los oc√©anos.

El cambio clim√°tico no es un problema lejano: ya est√° afectando a nuestra salud, econom√≠a y seguridad. Cuanto m√°s esperemos en actuar, mayores ser√°n las consecuencias en nuestro d√≠a a d√≠a.
Fuente: European Environment Agency ‚Äì Climate impacts`,
        link:{ title:"EEA ‚Äî Climate change impacts, risks and adaptation in Europe", url:"https://www.eea.europa.eu/en/topics/in-depth/climate-change-impacts-risks-and-adaptation" }
      },
      {
        id:12,
        titulo:"‚ÄúLa acci√≥n individual no sirve de nada‚Äù",
        texto:`Este mito busca desmotivar, sugiriendo que solo los gobiernos o grandes empresas pueden marcar la diferencia. Si bien es cierto que las decisiones pol√≠ticas y econ√≥micas son cruciales, las acciones individuales tienen un papel clave.

Por un lado, suman directamente en la reducci√≥n de emisiones: elegir transporte p√∫blico o bicicleta en lugar del coche, reducir el consumo de carne, optar por energ√≠as renovables en el hogar o mejorar la eficiencia energ√©tica son decisiones que reducen la huella personal. Por otro lado, generan un efecto multiplicador cultural y social: cuando mucha gente adopta comportamientos sostenibles, cambia la norma social y se ejerce presi√≥n sobre las instituciones y las empresas para transformarse.

Adem√°s, la acci√≥n individual inspira innovaci√≥n, crea mercados para soluciones limpias y puede influir en las decisiones pol√≠ticas a trav√©s del voto y la participaci√≥n ciudadana. No es una cuesti√≥n de elegir entre acci√≥n individual o colectiva: necesitamos ambas. Cada gesto cuenta, y juntos son una fuerza transformadora.`,
        link:{ title:"IPCC WGIII (2022) ‚Äî Demand-side (40‚Äì70%)", url:"https://www.ipcc.ch/report/ar6/wg3/resources/spm-headline-statements/" }
      }
    ];

    // ----- Utilidades -----
    const $ = (q, el=document) => el.querySelector(q);
    const $$ = (q, el=document) => Array.from(el.querySelectorAll(q));
    const clamp = (v, min, max) => Math.max(min, Math.min(max, v));
    const rand = (min, max) => Math.random() * (max - min) + min;
    const dist2 = (x1,y1,x2,y2)=>{const dx=x2-x1,dy=y2-y1;return dx*dx+dy*dy;};
    function shuffle(arr){for(let i=arr.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[arr[i],arr[j]]=[arr[j],arr[i]];}return arr;}

    // ----- Elementos -----
    const root = $('#game-root');
    const area = $('#gameArea');
    const playerEl = $('#player');
    const butterfliesEl = $('#butterflies');
    const seenCountEl = $('#seenCount');
    const btnRestart = $('#btnRestart');

    const modal = $('#modal'), modalTitle = $('#modalTitle'), modalText = $('#modalText'),
          modalSources = $('#modalSources'), modalOk = $('#modalOk'), closeX = $('#closeX'), overlay = $('#overlay');
    const endScreen = $('#endScreen'), playAgain = $('#playAgain');
    const joystick = $('#joystick'), stick = $('#stick');
    const dpadButtons = $$('.dpad button');

    // ----- Estado -----
    const STATE = {
      w:0, h:0, running:true, lastT:0, speed:260,
      player:{ x:200, y:200, r:24 },
      keys:{ up:false, down:false, left:false, right:false },
      joy:{ active:false, dx:0, dy:0, baseX:0, baseY:0, max:40 },
      butterflies:[], mapping:[], seenIds:new Set(), total:BULOS.length,
      facing:'right' // 'right' | 'left'
    };

    function resize(){
      const rect = area.getBoundingClientRect();
      STATE.w = rect.width; STATE.h = rect.height;
      STATE.player.x = clamp(STATE.player.x, STATE.player.r, STATE.w - STATE.player.r);
      STATE.player.y = clamp(STATE.player.y, STATE.player.r, STATE.h - STATE.player.r);
    }
    addEventListener('resize', resize, { passive:true });

    // ----- Mariposas -----
    function createButterflyElement(h, s=70, l=55){
      const div = document.createElement('div'); div.className='butterfly'; div.setAttribute('role','img'); div.setAttribute('aria-label','Mariposa');
      const color=`hsl(${h} ${s}% ${l}%)`;
      div.innerHTML=`
        <svg viewBox="0 0 120 90" aria-hidden="true">
          <rect x="55" y="35" width="10" height="20" rx="5" fill="#333"/><circle cx="60" cy="32" r="6" fill="#333"/>
          <g class="wL"><path d="M60,40 C30,20 18,10 14,26 C10,42 28,55 44,58 C50,59 54,58 58,52 Z" fill="${color}" opacity="0.95"/></g>
          <g class="wR"><path d="M60,40 C90,20 102,10 106,26 C110,42 92,55 76,58 C70,59 66,58 62,52 Z" fill="${color}" opacity="0.95"/></g>
          <circle cx="45" cy="50" r="5" fill="rgba(255,255,255,.65)"/><circle cx="75" cy="50" r="5" fill="rgba(255,255,255,.65)"/>
        </svg>`;
      return div;
    }

    function spawnButterflies(){
      butterfliesEl.innerHTML=''; STATE.butterflies=[]; STATE.mapping = shuffle([...Array(BULOS.length).keys()]);
      const margin=50, placed=[];
      for(let i=0;i<BULOS.length;i++){
        const hue=Math.round((360/BULOS.length)*i + rand(-10,10));
        const el=createButterflyElement(hue); butterfliesEl.appendChild(el);
        // Direcci√≥n inicial y par√°metros de vuelo err√°tico
        let angle = rand(0, Math.PI*2);
        const base = rand(50,110);
        let vx = Math.cos(angle) * base;
        let vy = Math.sin(angle) * base;
        const b={ id:i, x:0, y:0, vx, vy, r:18, el,
          base,
          speedFactor: 1,
          speedTarget: rand(0.6,1.8),
          speedTimer: rand(0.5,1.4),
          wander: rand(0.25, 0.9)
        };
        let tries=0;
        do{ b.x=rand(margin, STATE.w-margin); b.y=rand(margin, STATE.h-margin); tries++; if(tries>500) break; }
        while(placed.some(p=>dist2(p.x,p.y,b.x,b.y)<(p.r+b.r+26)**2));
        placed.push({x:b.x,y:b.y,r:b.r}); STATE.butterflies.push(b); setPos(b.el,b.x,b.y);
      }
    }

    // ----- Movimiento -----
    function setPos(el,x,y){ el.style.transform = `translate(${x}px, ${y}px) translate(-50%,-50%)`; }
    function updateFacing(){ playerEl.classList.toggle('face-left', STATE.facing === 'left'); playerEl.classList.toggle('face-right', STATE.facing !== 'left'); }

    function update(dt){
      if(!STATE.running) return;
      let dx=(STATE.keys.right?1:0)-(STATE.keys.left?1:0);
      let dy=(STATE.keys.down?1:0)-(STATE.keys.up?1:0);
      if(STATE.joy.active){ dx+=STATE.joy.dx; dy+=STATE.joy.dy; }
      if(dx<-0.01) STATE.facing='left'; else if(dx>0.01) STATE.facing='right';
      updateFacing();
      if(dx!==0 || dy!==0){ const len=Math.hypot(dx,dy); dx/=len; dy/=len; STATE.player.x = clamp(STATE.player.x + dx*STATE.speed*dt, STATE.player.r, STATE.w-STATE.player.r); STATE.player.y = clamp(STATE.player.y + dy*STATE.speed*dt, STATE.player.r, STATE.h-STATE.player.r); }
      setPos(playerEl, STATE.player.x, STATE.player.y);

      // Vuelo err√°tico (suave + serpenteo)
      for(const b of STATE.butterflies){
        b.speedTimer -= dt; if (b.speedTimer <= 0){ b.speedTimer = rand(0.4,1.3); b.speedTarget = rand(0.5,2.0); }
        b.speedFactor += (b.speedTarget - b.speedFactor) * Math.min(1, dt*2.5);
        const turn = rand(-b.wander, b.wander) * dt; const cos=Math.cos(turn), sin=Math.sin(turn);
        const rx = b.vx * cos - b.vy * sin; const ry = b.vx * sin + b.vy * cos;
        const mag = Math.hypot(rx, ry) || 1; const eff = b.base * b.speedFactor; b.vx = (rx/mag)*eff; b.vy = (ry/mag)*eff;
        b.x+=b.vx*dt; b.y+=b.vy*dt;
        if(b.x<b.r){b.x=b.r; b.vx*=-1;} if(b.x>STATE.w-b.r){b.x=STATE.w-b.r; b.vx*=-1;}
        if(b.y<b.r){b.y=b.r; b.vy*=-1;} if(b.y>STATE.h-b.r){b.y=STATE.h-b.r; b.vy*=-1;}
        setPos(b.el,b.x,b.y);
      }

      const pr=STATE.player.r;
      for(const b of [...STATE.butterflies]){ const rsum=pr+b.r; if(dist2(STATE.player.x,STATE.player.y,b.x,b.y)<=rsum*rsum){ captureButterfly(b); } }
    }

    function loop(t){ const now=t*0.001, dt=Math.min(0.033, now-(STATE.lastT||now)); STATE.lastT=now; update(dt); requestAnimationFrame(loop); }

    // ----- Captura / modal -----
    function captureButterfly(b){
      if(!STATE.butterflies.includes(b)) return;
      const data = BULOS[ STATE.mapping[b.id] ];
      if(STATE.seenIds.has(data.id)) return;
      STATE.butterflies = STATE.butterflies.filter(x=>x!==b); b.el.remove();
      STATE.seenIds.add(data.id); seenCountEl.textContent = STATE.seenIds.size.toString();
      openModal(data);
    }
    function openModal(data){
      STATE.running=false; modalTitle.textContent=data.titulo; modalText.textContent=data.texto;
      modalSources.innerHTML = data.link ? '<strong>Enlace:</strong> <a href="'+data.link.url+'" target="_blank" rel="noopener noreferrer">'+data.link.title+'</a>' : '<strong>Enlace:</strong> ‚Äî';
      modal.classList.remove('hidden'); setTimeout(()=>modalOk.focus(),0);
    }
    function closeModal(){ if(modal.classList.contains('hidden')) return; modal.classList.add('hidden'); if(STATE.seenIds.size>=STATE.total){ showEnd(); } else { STATE.running=true; root.focus(); } }
    function showEnd(){ endScreen.classList.remove('hidden'); setTimeout(()=>playAgain.focus(),0); }
    function hideEnd(){ endScreen.classList.add('hidden'); root.focus(); }

    // ----- Reinicio -----
    function resetGame(){ STATE.seenIds.clear(); seenCountEl.textContent='0'; STATE.running=true; STATE.player.x=STATE.w*0.5; STATE.player.y=STATE.h*0.62; STATE.facing='right'; updateFacing(); spawnButterflies(); hideEnd(); root.focus(); }

    // ----- Eventos teclado -----
    function setKey(e,isDown){
      switch(e.key){
        case 'ArrowUp': case 'w': case 'W': STATE.keys.up=isDown; break;
        case 'ArrowDown': case 's': case 'S': STATE.keys.down=isDown; break;
        case 'ArrowLeft': case 'a': case 'A': STATE.keys.left=isDown; break;
        case 'ArrowRight': case 'd': case 'D': STATE.keys.right=isDown; break;
        case 'Escape': if(!modal.classList.contains('hidden')) closeModal(); else if(!endScreen.classList.contains('hidden')) resetGame(); break;
      }
    }
    root.addEventListener('keydown', e=>{ if(['ArrowUp','ArrowDown','ArrowLeft','ArrowRight',' '].includes(e.key)) e.preventDefault(); setKey(e,true); });
    root.addEventListener('keyup', e=>setKey(e,false));

    // ----- Modal -----
    overlay.addEventListener('click', closeModal); modalOk.addEventListener('click', closeModal); closeX.addEventListener('click', closeModal);
    modal.addEventListener('keydown', e=>{ if(e.key==='Tab'){ const f=[closeX,modalOk]; const i=f.indexOf(document.activeElement); const ni=e.shiftKey?(i<=0?f.length-1:i-1):(i>=f.length-1?0:i+1); f[ni].focus(); e.preventDefault(); } });

    // ----- Botones UI -----
    btnRestart.addEventListener('click', resetGame);
    playAgain.addEventListener('click', resetGame);

    // ----- T√°ctil -----
    function joyStart(ev){ ev.preventDefault(); STATE.joy.active=true; const r=joystick.getBoundingClientRect(); STATE.joy.baseX=r.left+r.width/2; STATE.joy.baseY=r.top+r.height/2; joyMove(ev); }
    function joyMove(ev){ if(!STATE.joy.active) return; const p=getPoint(ev); const dx=p.x-STATE.joy.baseX, dy=p.y-STATE.joy.baseY; const len=Math.hypot(dx,dy), max=STATE.joy.max, k=len>max?(max/len):1; const sx=dx*k, sy=dy*k; stick.style.transform=`translate(${sx}px, ${sy}px) translate(-50%,-50%)`; STATE.joy.dx=(len<6)?0:(dx/max); STATE.joy.dy=(len<6)?0:(dy/max); }
    function joyEnd(){ STATE.joy.active=false; STATE.joy.dx=0; STATE.joy.dy=0; stick.style.transform='translate(-50%,-50%)'; }
    function getPoint(ev){ if(ev.touches&&ev.touches[0]) return {x:ev.touches[0].clientX,y:ev.touches[0].clientY}; return {x:ev.clientX,y:ev.clientY}; }
    joystick.addEventListener('pointerdown', joyStart);
    addEventListener('pointermove', joyMove); addEventListener('pointerup', joyEnd);
    joystick.addEventListener('touchstart', joyStart, { passive:false });
    addEventListener('touchmove', joyMove, { passive:false }); addEventListener('touchend', joyEnd);
    function dpadPress(dir,down){ if(down){ if(dir==='up')STATE.keys.up=true; if(dir==='down')STATE.keys.down=true; if(dir==='left')STATE.keys.left=true; if(dir==='right')STATE.keys.right=true; } else { if(dir==='up')STATE.keys.up=false; if(dir==='down')STATE.keys.down=false; if(dir==='left')STATE.keys.left=false; if(dir==='right')STATE.keys.right=false; } }
    dpadButtons.forEach(btn=>{ const dir=btn.dataset.dir, downEv=e=>{e.preventDefault();dpadPress(dir,true);}, upEv=e=>{e.preventDefault();dpadPress(dir,false);}; btn.addEventListener('pointerdown',downEv); btn.addEventListener('pointerup',upEv); btn.addEventListener('pointerleave',upEv); btn.addEventListener('touchstart',downEv,{passive:false}); btn.addEventListener('touchend',upEv); btn.addEventListener('touchcancel',upEv); });

    // ----- Inicio -----
    function init(){
      resize();
      playerEl.style.left='0px'; playerEl.style.top='0px';
      STATE.player.x=STATE.w*0.5; STATE.player.y=STATE.h*0.62; STATE.facing='right'; updateFacing();
      setPos(playerEl, STATE.player.x, STATE.player.y);
      spawnButterflies();
      root.focus();
      requestAnimationFrame(loop);
    }
    addEventListener('load', init);
  </script>

  <noscript>
    <div style="position:fixed; inset:0; display:grid; place-items:center; background:#001b2e; color:#fff; z-index:9999; padding:24px; text-align:center;">
      <div><h2 style="margin:0 0 8px;">Este juego necesita JavaScript</h2>
      <p style="opacity:.9; max-width:680px;">Si lo incrustas en un bloque HTML de WordPress.com y no se ve, usa un iframe desde un hosting externo o un m√©todo que permita ejecutar JS.</p></div>
    </div>
  </noscript>
</body>
</html>
  .touch-ui{position:absolute;inset:auto 12px 12px 12px;display:flex;align-items:flex-end;gap:12px;z-index:40;pointer-events:none;}
  .joystick{pointer-events:auto;position:relative;width:112px;height:112px;border-radius:50%;background:rgba(255,255,255,.55);backdrop-filter:blur(6px);box-shadow:var(--shadow);touch-action:none;}
  .joystick .stick{position:absolute;left:50%;top:50%;width:56px;height:56px;transform:translate(-50%,-50%);border-radius:50%;background:rgba(255,255,255,.95);border:2px solid rgba(0,0,0,.08);box-shadow:var(--shadow);} 
  .dpad{pointer-events:auto;display:grid;grid-template:" . up  . " 40px "left . right" 40px " . down . " 40px/40px 40px 40px;gap:6px;background:rgba(255,255,255,.55);padding:8px;border-radius:16px;box-shadow:var(--shadow);} 
  .dpad button{width:40px;height:40px;border-radius:10px;border:0;background:rgba(255,255,255,.95);font-weight:900;box-shadow:var(--shadow);cursor:pointer;} 
  .dpad .up{grid-area:up;} .dpad .down{grid-area:down;} .dpad .left{grid-area:left;} .dpad .right{grid-area:right;}

  @media (min-width:900px){.touch-ui{opacity:.85;}}
</style>
</head>
<body>
<div id="game-root" tabindex="0" aria-label="Juego caza-bulos ambientales" role="application">
  <div class="game-area" id="gameArea" aria-label="√Årea de juego">
    <div class="hud" aria-live="polite">
      <div class="counter">Bulos vistos: <span id="seenCount">0</span>/10</div>
      <button class="btn" id="btnRestart" aria-label="Reiniciar partida">Reiniciar</button>
    </div>

    <!-- Protagonista -->
    <div class="player face-right" id="player" role="img" aria-label="Protagonista con cazamariposas">
      <svg viewBox="0 0 56 56" aria-hidden="true">
        <circle cx="20" cy="14" r="8" fill="#ffd38e" />
        <rect x="12" y="22" width="16" height="18" rx="6" fill="#2563eb"/>
        <rect x="10" y="40" width="10" height="12" rx="3" fill="#0ea5e9"/>
        <rect x="20" y="40" width="10" height="12" rx="3" fill="#0ea5e9"/>
        <g class="arm">
          <rect x="24" y="24" width="18" height="6" rx="3" fill="#ffd38e"/>
          <rect x="38" y="18" width="3" height="20" rx="1.5" fill="#8b5e3c"/>
          <ellipse cx="45" cy="14" rx="9" ry="7" fill="#fff" stroke="#7aa2c8" stroke-width="2"/>
          <ellipse cx="45" cy="14" rx="7" ry="5" fill="none" stroke="#7aa2c8" stroke-width="1.2" stroke-dasharray="2 2"/>
        </g>
      </svg>
    </div>

    <div id="butterflies" aria-label="Mariposas"></div>

    <div class="touch-ui" aria-hidden="false">
      <div class="joystick" id="joystick" aria-label="Joystick t√°ctil"><div class="stick" id="stick"></div></div>
      <div class="dpad" aria-label="Botones flecha t√°ctiles">
        <button class="up" data-dir="up" aria-label="Arriba">‚ñ≤</button>
        <button class="left" data-dir="left" aria-label="Izquierda">‚óÄ</button>
        <button class="right" data-dir="right" aria-label="Derecha">‚ñ∂</button>
        <button class="down" data-dir="down" aria-label="Abajo">‚ñº</button>
      </div>
    </div>
  </div>

  <!-- Modal -->
  <div class="modal hidden" id="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
    <div class="overlay" id="overlay" tabindex="-1"></div>
    <div class="dialog" role="document">
      <button class="close-x" id="closeX" aria-label="Cerrar">√ó</button>
      <h2 id="modalTitle">T√≠tulo</h2>
      <p id="modalText">Texto</p>
      <p class="sources" id="modalSources"><strong>Fuentes:</strong> ‚Äî</p>
      <div class="actions"><button class="btn secondary" id="modalOk" autofocus>Cerrar (Esc)</button></div>
    </div>
  </div>

  <!-- Fin -->
  <div class="end-screen hidden" id="endScreen" role="dialog" aria-modal="true" aria-labelledby="endTitle">
    <div class="overlay"></div>
    <div class="panel">
      <h2 id="endTitle">¬°Enhorabuena! ü¶ã</h2>
      <p>Has cazado los 10 bulos. ¬øOtra partida?</p>
      <button class="btn" id="playAgain">Volver a jugar</button>
    </div>
  </div>
</div>

<script>
  // ===== Datos =====
  const BULOS = [
    { id:1, titulo:"El clima siempre ha cambiado ‚Äî esto no es diferente", texto:"Aunque el clima de la Tierra ha variado en el pasado, el ritmo actual de calentamiento es mucho m√°s r√°pido que cualquier variaci√≥n natural en millones de a√±os.", fuentes:["Covering Climate Now","#ThinkLandscape","Covering Climate Now"] },
    { id:2, titulo:"Est√° haciendo fr√≠o hoy, ¬øc√≥mo puede haber calentamiento global?", texto:"Esta confusi√≥n surge de mezclar clima (corto plazo, local) con tiempo atmosf√©rico. Aunque haya d√≠as fr√≠os, la tendencia global sigue siendo de aumento de temperatura.", fuentes:["UNEP - UN Environment Programme","Greenpeace"] },
    { id:3, titulo:"Los cient√≠ficos no est√°n de acuerdo sobre el cambio clim√°tico", texto:"La evidencia cient√≠fica es clara: m√°s del 97‚Äì99 % de los estudios revisados concluyen que el cambio clim√°tico es consecuencia de la actividad humana.", fuentes:["#ThinkLandscape"] },
    { id:4, titulo:"El CO‚ÇÇ es necesario para las plantas, no puede ser da√±ino", texto:"Es cierto que las plantas necesitan CO‚ÇÇ, pero la cantidad adicional liberada hoy en d√≠a sobrepasa la capacidad de absorci√≥n natural, especialmente con la deforestaci√≥n.", fuentes:["National Grid"] },
    { id:5, titulo:"No ha calentado desde 1998 (o hubo una pausa)", texto:"Durante 1998‚Äì2012 se observ√≥ una moderaci√≥n en el aumento de temperatura superficial en algunos registros, pero estudios posteriores demuestran que ese aparente 'hiato' fue artefacto de variabilidad natural y datos incompletos ‚Äî incluso el sistema clim√°tico sigui√≥ acumulando calor.", fuentes:["Wikipedia"] },
    { id:6, titulo:"Se avecina una nueva era de hielo (fue predicha en los a√±os 70)", texto:"S√≠ hubo algunos estudios que especularon sobre enfriamiento, pero la gran mayor√≠a ya vaticinaba calentamiento, y los modelos actuales han demostrado ser bastante fiables.", fuentes:["#ThinkLandscape"] },
    { id:7, titulo:"Ant√°rtida est√° ganando hielo, no perdiendo", texto:"Aunque algunas partes (como la Ant√°rtida oriental) acumulan m√°s nieve, en conjunto el continente pierde m√°s masa por fusi√≥n en otras zonas, contribuyendo al aumento del nivel del mar.", fuentes:["#ThinkLandscape"] },
    { id:8, titulo:"El Sol es el culpable del calentamiento, no los humanos", texto:"Las observaciones muestran que la radiaci√≥n solar y la temperatura global han divergido en las √∫ltimas tres d√©cadas, mientras los gases de efecto invernadero s√≠ muestran correlaci√≥n directa con el calentamiento.", fuentes:["Skeptical Science"] },
    { id:9, titulo:"El gr√°fico 'hockey stick' es falso / los registros de temperatura son dudosos", texto:"Muchos argumentos atacan la validez de los registros hist√≥ricos, pero las series de temperatura, incluso desde zonas rurales o con term√≥metros tradicionales, confirman la tendencia al alza, y los estudios que critican el 'hockey stick' carecen de respaldo robusto.", fuentes:["Skeptical Science"] },
    { id:10, titulo:"Radioactividad, rayos c√≥smicos o procesos naturales explican todo", texto:"Argumentos que desv√≠an el foco cient√≠fico hacia procesos como rayos c√≥smicos o efectos naturales han sido desmentidos: no hay correlaci√≥n significativa con el calentamiento actual, mientras el CO‚ÇÇ antropog√©nico s√≠ es el principal factor.", fuentes:[] }
  ];

  // ===== Utilidades =====
  const $ = (q, el=document) => el.querySelector(q);
  const $$ = (q, el=document) => Array.from(el.querySelectorAll(q));
  const clamp = (v,min,max)=>Math.max(min,Math.min(max,v));
  const rand = (min,max)=>Math.random()*(max-min)+min;
  const dist2=(x1,y1,x2,y2)=>{const dx=x2-x1,dy=y2-y1;return dx*dx+dy*dy;};
  const shuffle = (arr)=>{ for(let i=arr.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [arr[i],arr[j]]=[arr[j],arr[i]]; } return arr; };

  // ===== Elementos =====
  const root = $('#game-root');
  const area = $('#gameArea');
  const playerEl = $('#player');
  const butterfliesEl = $('#butterflies');
  const seenCountEl = $('#seenCount');
  const btnRestart = $('#btnRestart');
  const modal = $('#modal'), modalTitle = $('#modalTitle'), modalText = $('#modalText'), modalSources = $('#modalSources'), modalOk = $('#modalOk'), closeX = $('#closeX'), overlay = $('#overlay');
  const endScreen = $('#endScreen'), playAgain = $('#playAgain');
  const joystick = $('#joystick'), stick = $('#stick');
  const dpadButtons = $$('.dpad button');

  // ===== Estado =====
  const STATE = {
    w:0, h:0, running:true, lastT:0, speed:260,
    player:{ x:200, y:200, r:24 },
    keys:{ up:false, down:false, left:false, right:false },
    joy:{ active:false, dx:0, dy:0, baseX:0, baseY:0, max:40 },
    butterflies:[], mapping:[], seenIds:new Set(), total:BULOS.length,
    facing:'right' // 'right' | 'left'
  };

  function resize(){
    const r = area.getBoundingClientRect();
    STATE.w=r.width; STATE.h=r.height;
    STATE.player.x = clamp(STATE.player.x, STATE.player.r, STATE.w-STATE.player.r);
    STATE.player.y = clamp(STATE.player.y, STATE.player.r, STATE.h-STATE.player.r);
  }
  addEventListener('resize', resize, { passive:true });

  // ===== Mariposas =====
  function createButterflyElement(h,s=70,l=55){
    const el = document.createElement('div');
    el.className='butterfly'; el.setAttribute('role','img'); el.setAttribute('aria-label','Mariposa');
    const color=`hsl(${h} ${s}% ${l}%)`;
    el.innerHTML = `
      <svg viewBox="0 0 120 90" aria-hidden="true">
        <rect x="55" y="35" width="10" height="20" rx="5" fill="#333"/><circle cx="60" cy="32" r="6" fill="#333"/>
        <g class="wL"><path d="M60,40 C30,20 18,10 14,26 C10,42 28,55 44,58 C50,59 54,58 58,52 Z" fill="${color}" opacity="0.95"/></g>
        <g class="wR"><path d="M60,40 C90,20 102,10 106,26 C110,42 92,55 76,58 C70,59 66,58 62,52 Z" fill="${color}" opacity="0.95"/></g>
        <circle cx="45" cy="50" r="5" fill="rgba(255,255,255,.65)"/><circle cx="75" cy="50" r="5" fill="rgba(255,255,255,.65)"/>
      </svg>`;
    return el;
  }

  function spawnButterflies(){
    butterfliesEl.innerHTML=''; STATE.butterflies=[]; STATE.mapping = shuffle([...Array(BULOS.length).keys()]);
    const margin=50, placed=[];
    for(let i=0;i<BULOS.length;i++){
      const hue=Math.round((360/BULOS.length)*i + rand(-10,10));
      const el = createButterflyElement(hue);
      butterfliesEl.appendChild(el);

      // Direcci√≥n inicial normalizada + velocidad base
      let angle = rand(0, Math.PI*2);
      const base = rand(50,110);               // velocidad base (px/s)
      let vx = Math.cos(angle) * base;
      let vy = Math.sin(angle) * base;

      const b={
        id:i, x:0,y:0, vx, vy, r:18, el,
        base,                                   // ===== ERR√ÅTICO: base de velocidad
        speedFactor: 1,                         // ===== ERR√ÅTICO: factor actual (suave)
        speedTarget: rand(0.6,1.8),            // ===== ERR√ÅTICO: pr√≥ximo objetivo
        speedTimer: rand(0.5,1.4),             // ===== ERR√ÅTICO: cu√°ndo cambiar objetivo
        wander: rand(0.25, 0.9)                // ===== ERR√ÅTICO: intensidad de giro (rad/s)
      };

      // posici√≥n inicial sin solapar
      let tries=0;
      do{ b.x=rand(margin,STATE.w-margin); b.y=rand(margin,STATE.h-margin); tries++; if(tries>500) break; }
      while(placed.some(p=>dist2(p.x,p.y,b.x,b.y)<(p.r+b.r+26)**2));
      placed.push({x:b.x,y:b.y,r:b.r});

      STATE.butterflies.push(b);
      setPos(b.el,b.x,b.y);
    }
  }

  // ===== Movimiento =====
  function setPos(el,x,y){ el.style.transform=`translate(${x}px, ${y}px) translate(-50%,-50%)`; }

  function updateFacing(){
    playerEl.classList.toggle('face-left', STATE.facing === 'left');
    playerEl.classList.toggle('face-right', STATE.facing !== 'left');
  }

  function update(dt){
    if(!STATE.running) return;

    // --- Jugador
    let dx=(STATE.keys.right?1:0)-(STATE.keys.left?1:0);
    let dy=(STATE.keys.down?1:0)-(STATE.keys.up?1:0);
    if(STATE.joy.active){ dx+=STATE.joy.dx; dy+=STATE.joy.dy; }

    if(dx<-0.01) STATE.facing='left';
    else if(dx>0.01) STATE.facing='right';
    updateFacing();

    if(dx!==0 || dy!==0){
      const len=Math.hypot(dx,dy); dx/=len; dy/=len;
      STATE.player.x = clamp(STATE.player.x + dx*STATE.speed*dt, STATE.player.r, STATE.w-STATE.player.r);
      STATE.player.y = clamp(STATE.player.y + dy*STATE.speed*dt, STATE.player.r, STATE.h-STATE.player.r);
    }
    setPos(playerEl, STATE.player.x, STATE.player.y);

    // --- Mariposas (vuelo err√°tico)
    for(const b of STATE.butterflies){

      // ===== ERR√ÅTICO: actualizar objetivo de velocidad cada cierto tiempo
      b.speedTimer -= dt;
      if (b.speedTimer <= 0){
        b.speedTimer = rand(0.4, 1.3);           // pr√≥ximo cambio aleatorio
        b.speedTarget = rand(0.5, 2.0);          // nuevo objetivo (50% a 200% de la base)
      }
      // acercar suavemente el factor actual al objetivo
      b.speedFactor += (b.speedTarget - b.speedFactor) * Math.min(1, dt * 2.5);

      // ===== ERR√ÅTICO: peque√±o giro aleatorio (serpenteo)
      const turn = rand(-b.wander, b.wander) * dt; // rad/frame
      const cos = Math.cos(turn), sin = Math.sin(turn);
      let dirx = b.vx, diry = b.vy;
      // rotar el vector velocidad actual
      const rx = dirx * cos - diry * sin;
      const ry = dirx * sin + diry * cos;

      // normalizar y llevar a velocidad efectiva (base * factor)
      const mag = Math.hypot(rx, ry) || 1;
      const eff = b.base * b.speedFactor;
      b.vx = (rx / mag) * eff;
      b.vy = (ry / mag) * eff;

      // mover
      b.x += b.vx * dt;
      b.y += b.vy * dt;

      // rebote contra bordes (refleja direcci√≥n manteniendo velocidad)
      if (b.x < b.r) { b.x = b.r; b.vx *= -1; }
      if (b.x > STATE.w - b.r) { b.x = STATE.w - b.r; b.vx *= -1; }
      if (b.y < b.r) { b.y = b.r; b.vy *= -1; }
      if (b.y > STATE.h - b.r) { b.y = STATE.h - b.r; b.vy *= -1; }

      setPos(b.el,b.x,b.y);
    }

    // Colisiones
    const pr=STATE.player.r;
    for(const b of [...STATE.butterflies]){
      const rsum=pr+b.r;
      if(dist2(STATE.player.x,STATE.player.y,b.x,b.y) <= rsum*rsum){
        captureButterfly(b);
      }
    }
  }

  function loop(t){ const now=t*0.001, dt=Math.min(0.033, now-(STATE.lastT||now)); STATE.lastT=now; update(dt); requestAnimationFrame(loop); }

  // ===== Captura / modal =====
  function captureButterfly(b){
    if(!STATE.butterflies.includes(b)) return;
    const data = BULOS[ STATE.mapping[b.id] ];
    if(STATE.seenIds.has(data.id)) return;
    STATE.butterflies = STATE.butterflies.filter(x=>x!==b); b.el.remove();
    STATE.seenIds.add(data.id); seenCountEl.textContent = STATE.seenIds.size.toString();
    openModal(data);
  }
  function openModal(data){
    STATE.running=false;
    modalTitle.textContent=data.titulo; modalText.textContent=data.texto;
    modalSources.innerHTML = (data.fuentes && data.fuentes.length) ? '<strong>Fuentes:</strong> '+data.fuentes.join(', ') : '<strong>Fuentes:</strong> ‚Äî';
    modal.classList.remove('hidden'); setTimeout(()=>modalOk.focus(),0);
  }
  function closeModal(){
    if(modal.classList.contains('hidden')) return;
    modal.classList.add('hidden');
    if(STATE.seenIds.size>=STATE.total){ showEnd(); } else { STATE.running=true; root.focus(); }
  }
  function showEnd(){ endScreen.classList.remove('hidden'); setTimeout(()=>playAgain.focus(),0); }
  function hideEnd(){ endScreen.classList.add('hidden'); root.focus(); }

  // ===== Reinicio =====
  function resetGame(){
    STATE.seenIds.clear(); seenCountEl.textContent='0'; STATE.running=true;
    STATE.player.x=STATE.w*0.5; STATE.player.y=STATE.h*0.62;
    STATE.facing='right'; updateFacing();
    spawnButterflies(); hideEnd(); root.focus();
  }

  // ===== Eventos =====
  function setKey(e,isDown){
    switch(e.key){
      case 'ArrowUp': case 'w': case 'W': STATE.keys.up=isDown; break;
      case 'ArrowDown': case 's': case 'S': STATE.keys.down=isDown; break;
      case 'ArrowLeft': case 'a': case 'A': STATE.keys.left=isDown; break;
      case 'ArrowRight': case 'd': case 'D': STATE.keys.right=isDown; break;
      case 'Escape':
        if(!modal.classList.contains('hidden')) closeModal();
        else if(!endScreen.classList.contains('hidden')) resetGame();
        break;
    }
  }
  root.addEventListener('keydown', e=>{ if(['ArrowUp','ArrowDown','ArrowLeft','ArrowRight',' '].includes(e.key)) e.preventDefault(); setKey(e,true); });
  root.addEventListener('keyup', e=>setKey(e,false));

  overlay.addEventListener('click', closeModal); modalOk.addEventListener('click', closeModal); closeX.addEventListener('click', closeModal);
  modal.addEventListener('keydown', e=>{
    if(e.key==='Tab'){ const f=[closeX,modalOk]; const i=f.indexOf(document.activeElement); const ni=e.shiftKey?(i<=0?f.length-1:i-1):(i>=f.length-1?0:i+1); f[ni].focus(); e.preventDefault(); }
  });

  btnRestart.addEventListener('click', resetGame);
  playAgain.addEventListener('click', resetGame);

  // T√°ctil
  function joyStart(ev){ ev.preventDefault(); STATE.joy.active=true; const r=joystick.getBoundingClientRect(); STATE.joy.baseX=r.left+r.width/2; STATE.joy.baseY=r.top+r.height/2; joyMove(ev); }
  function joyMove(ev){ if(!STATE.joy.active) return; const p=getPoint(ev); const dx=p.x-STATE.joy.baseX, dy=p.y-STATE.joy.baseY; const len=Math.hypot(dx,dy), max=STATE.joy.max, k=len>max?(max/len):1; const sx=dx*k, sy=dy*k; stick.style.transform=`translate(${sx}px, ${sy}px) translate(-50%,-50%)`; STATE.joy.dx=(len<6)?0:(dx/max); STATE.joy.dy=(len<6)?0:(dy/max); }
  function joyEnd(){ STATE.joy.active=false; STATE.joy.dx=0; STATE.joy.dy=0; stick.style.transform='translate(-50%,-50%)'; }
  function getPoint(ev){ if(ev.touches&&ev.touches[0]) return {x:ev.touches[0].clientX,y:ev.touches[0].clientY}; return {x:ev.clientX,y:ev.clientY}; }
  joystick.addEventListener('pointerdown', joyStart);
  addEventListener('pointermove', joyMove); addEventListener('pointerup', joyEnd);
  joystick.addEventListener('touchstart', joyStart, { passive:false });
  addEventListener('touchmove', joyMove, { passive:false }); addEventListener('touchend', joyEnd);

  function dpadPress(dir,down){
    if(down){ if(dir==='up')STATE.keys.up=true; if(dir==='down')STATE.keys.down=true; if(dir==='left')STATE.keys.left=true; if(dir==='right')STATE.keys.right=true; }
    else    { if(dir==='up')STATE.keys.up=false; if(dir==='down')STATE.keys.down=false; if(dir==='left')STATE.keys.left=false; if(dir==='right')STATE.keys.right=false; }
  }
  dpadButtons.forEach(btn=>{
    const dir=btn.dataset.dir, downEv=e=>{e.preventDefault();dpadPress(dir,true);}, upEv=e=>{e.preventDefault();dpadPress(dir,false);};
    btn.addEventListener('pointerdown',downEv); btn.addEventListener('pointerup',upEv); btn.addEventListener('pointerleave',upEv);
    btn.addEventListener('touchstart',downEv,{passive:false}); btn.addEventListener('touchend',upEv); btn.addEventListener('touchcancel',upEv);
  });

  // ===== Inicio =====
  function init(){
    resize();
    // anula fallback si hay JS; la posici√≥n se controlar√° por transform
    playerEl.style.left='0px'; playerEl.style.top='0px';
    STATE.player.x=STATE.w*0.5; STATE.player.y=STATE.h*0.62;
    STATE.facing='right'; updateFacing();
    setPos(playerEl, STATE.player.x, STATE.player.y);
    spawnButterflies();
    root.focus();
    requestAnimationFrame(loop);
  }
  addEventListener('load', init);
</script>

<noscript>
  <div style="position:fixed; inset:0; display:grid; place-items:center; background:#001b2e; color:#fff; z-index:9999; padding:24px; text-align:center;">
    <div><h2 style="margin:0 0 8px;">Este juego necesita JavaScript</h2>
    <p style="opacity:.9; max-width:680px;">Si lo incrustas en un bloque HTML de WordPress.com y no se ve, usa un iframe desde un hosting externo o un m√©todo que permita ejecutar JS.</p></div>
  </div>
</noscript>
</body>
</html>
